<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borang Ketidakhadiran - SKBTHO2</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .header-logo { max-width: 100px; height: auto; margin-bottom: 10px; }
        .school-title { font-weight: bold; color: #1a237e; margin-bottom: 20px; }
    </style>
</head>
<body class="bg-light">
    <div class="container mt-4 mb-5">
        <div class="text-center">
            <img src="https://imgur.com/DLy3jZn.png" alt="Logo SKBTHO2" class="header-logo">
            <h4 class="school-title">SK BANDAR TUN HUSSEIN ONN 2</h4>
        </div>

        <div class="card shadow">
            <div class="card-header bg-primary text-white text-center">
                <h5 class="mb-0">Pendaftaran Ketidakhadiran Kokurikulum</h5>
            </div>
            <div class="card-body">
                <form id="kokoForm">
                    <div class="mb-3">
                        <label class="form-label">Tarikh</label>
                        <input type="date" id="tarikh" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Nama Murid</label>
                        <input type="text" id="nama" class="form-control" placeholder="Nama penuh murid" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Kelas</label>
                        <input type="text" id="kelas" class="form-control" style="text-transform:uppercase" placeholder="Cth: 5 ALPHA" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Sebab Ketidakhadiran</label>
                        <textarea id="sebab" class="form-control" rows="3" placeholder="Sila nyatakan sebab" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary w-100 py-2" id="submitBtn">Hantar Maklumat</button>
                </form>
                <hr>
                <a href="laporan.html" class="btn btn-outline-secondary w-100">Semak Laporan Ketidakhadiran</a>
            </div>
        </div>
    </div>

    <script>
        const SCRIPT_URL = "MASUKKAN_URL_WEB_APP_ANDA_DI_SINI";

        document.getElementById('kokoForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            btn.disabled = true;
            btn.innerText = "Sedang Menghantar...";

            const data = {
                tarikh: document.getElementById('tarikh').value,
                nama: document.getElementById('nama').value,
                kelas: document.getElementById('kelas').value,
                sebab: document.getElementById('sebab').value
            };

            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // Untuk mengelakkan isu CORS dengan Google Script
                body: JSON.stringify(data)
            })
            .then(() => {
                alert('Data berjaya disimpan ke dalam sistem.');
                this.reset();
                btn.disabled = false;
                btn.innerText = "Hantar Maklumat";
            })
            .catch(err => {
                alert('Ralat berlaku. Sila cuba lagi.');
                btn.disabled = false;
                btn.innerText = "Hantar Maklumat";
            });
        });
    </script>
</body>
</html>
